{"ast":null,"code":"var _s = $RefreshSig$();\nimport { db } from \"../firebase/config\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassowrd, updateProfile, signOut } from 'firebase/auth';\nimport { useState, useEffect } from 'react';\nexport const useAuthentication = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(null);\n\n  //cleanup\n  // deal with memory leak (lidar com vazamento de mem칩ria)\n  const [cancelled, setCancelled] = useState(false);\n  const auth = getAuth();\n  function checkIfIsCancelled() {\n    if (cancelled) {\n      return;\n    }\n  }\n  const createUser = async data => {\n    checkIfIsCancelled();\n    setLoading(true);\n    setError(null);\n    try {\n      const {\n        user\n      } = await createUserWithEmailAndPassword(auth, data.email, data.password);\n      await updateProfile(user, {\n        displayName: data.displayName\n      });\n      setLoading(false);\n      return user;\n    } catch (error) {\n      console.log(error.message);\n      console.log(typeof error.message);\n      let systemErrorMessage;\n      if (error.message.includes(\"Password\")) {\n        systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres.\";\n      } else if (error.message.includes(\"email-already\")) {\n        systemErrorMessage = \"E-mail j치 cadastrado.\";\n      } else {\n        systemErrorMessage = \"Ocorreu um erro, por favor tente mais tarde\";\n      }\n      setError(systemErrorMessage);\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    return () => setCancelled(true);\n  }, []);\n  return {\n    auth,\n    createUser,\n    error,\n    loading\n  };\n};\n_s(useAuthentication, \"zy8o/Jx4cwmdtROZYyphTdkGK1I=\");","map":{"version":3,"names":["db","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassowrd","updateProfile","signOut","useState","useEffect","useAuthentication","_s","error","setError","loading","setLoading","cancelled","setCancelled","auth","checkIfIsCancelled","createUser","data","user","email","password","displayName","console","log","message","systemErrorMessage","includes"],"sources":["C:/Users/vini-/OneDrive/Documentos/Projetos/miniBlog/miniblog/src/hooks/useAuthentication.js"],"sourcesContent":["import {db} from \"../firebase/config\"\r\n\r\nimport {\r\n    getAuth,\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassowrd,\r\n    updateProfile,\r\n    signOut\r\n} from 'firebase/auth'\r\n\r\nimport { useState, useEffect } from 'react'\r\n\r\nexport const useAuthentication = () => {\r\n    const [error, setError] = useState(null)\r\n    const [loading, setLoading] = useState(null)\r\n\r\n    //cleanup\r\n    // deal with memory leak (lidar com vazamento de mem칩ria)\r\n    const [cancelled,setCancelled] = useState(false)\r\n\r\n    const auth = getAuth()\r\n\r\n    function checkIfIsCancelled() {\r\n        if (cancelled) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const createUser = async (data) => {\r\n        checkIfIsCancelled();\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const {user} = await createUserWithEmailAndPassword(\r\n             auth,\r\n             data.email,\r\n             data.password\r\n          );\r\n\r\n          await updateProfile(user, {\r\n            displayName: data.displayName\r\n          });\r\n\r\n          setLoading(false);\r\n\r\n          return user;\r\n\r\n        } catch (error) {\r\n            console.log(error.message);\r\n            console.log(typeof error.message);\r\n\r\n            let systemErrorMessage \r\n\r\n            if(error.message.includes(\"Password\")) {\r\n                systemErrorMessage = \"A senha precisa conter pelo menos 6 caracteres.\"\r\n              } else if(error.message.includes(\"email-already\")) {\r\n                systemErrorMessage = \"E-mail j치 cadastrado.\";\r\n              } else {\r\n                systemErrorMessage = \"Ocorreu um erro, por favor tente mais tarde\";\r\n              }\r\n\r\n              setError(systemErrorMessage)\r\n            \r\n        }\r\n\r\n        setLoading(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => setCancelled(true);\r\n    }, []);\r\n\r\n     return {\r\n        auth,\r\n        createUser,\r\n        error,\r\n        loading\r\n     }\r\n\r\n};"],"mappings":";AAAA,SAAQA,EAAE,QAAO,oBAAoB;AAErC,SACIC,OAAO,EACPC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,aAAa,EACbC,OAAO,QACJ,eAAe;AAEtB,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,OAAO,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;;EAE5C;EACA;EACA,MAAM,CAACQ,SAAS,EAACC,YAAY,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAEhD,MAAMU,IAAI,GAAGf,OAAO,CAAC,CAAC;EAEtB,SAASgB,kBAAkBA,CAAA,EAAG;IAC1B,IAAIH,SAAS,EAAE;MACX;IACJ;EACJ;EAEA,MAAMI,UAAU,GAAG,MAAOC,IAAI,IAAK;IAC/BF,kBAAkB,CAAC,CAAC;IAEpBJ,UAAU,CAAC,IAAI,CAAC;IAChBF,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACA,MAAM;QAACS;MAAI,CAAC,GAAG,MAAMlB,8BAA8B,CAClDc,IAAI,EACJG,IAAI,CAACE,KAAK,EACVF,IAAI,CAACG,QACR,CAAC;MAED,MAAMlB,aAAa,CAACgB,IAAI,EAAE;QACxBG,WAAW,EAAEJ,IAAI,CAACI;MACpB,CAAC,CAAC;MAEFV,UAAU,CAAC,KAAK,CAAC;MAEjB,OAAOO,IAAI;IAEb,CAAC,CAAC,OAAOV,KAAK,EAAE;MACZc,OAAO,CAACC,GAAG,CAACf,KAAK,CAACgB,OAAO,CAAC;MAC1BF,OAAO,CAACC,GAAG,CAAC,OAAOf,KAAK,CAACgB,OAAO,CAAC;MAEjC,IAAIC,kBAAkB;MAEtB,IAAGjB,KAAK,CAACgB,OAAO,CAACE,QAAQ,CAAC,UAAU,CAAC,EAAE;QACnCD,kBAAkB,GAAG,iDAAiD;MACxE,CAAC,MAAM,IAAGjB,KAAK,CAACgB,OAAO,CAACE,QAAQ,CAAC,eAAe,CAAC,EAAE;QACjDD,kBAAkB,GAAG,uBAAuB;MAC9C,CAAC,MAAM;QACLA,kBAAkB,GAAG,6CAA6C;MACpE;MAEAhB,QAAQ,CAACgB,kBAAkB,CAAC;IAElC;IAEAd,UAAU,CAAC,KAAK,CAAC;EACrB,CAAC;EAEDN,SAAS,CAAC,MAAM;IACZ,OAAO,MAAMQ,YAAY,CAAC,IAAI,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEL,OAAO;IACJC,IAAI;IACJE,UAAU;IACVR,KAAK;IACLE;EACH,CAAC;AAEN,CAAC;AAACH,EAAA,CArEWD,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}